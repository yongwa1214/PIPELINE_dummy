<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.green.pipeline_dummy.application.community_workshop.WorkshopMapper">
    <insert id="saveWorkshop">
        INSERT IGNORE INTO community_workshop
        set gm_profile_id = #{gmProfileId}
        ,game_id = #{gameId}
        ,workshop_thumbnail = #{workshopThumbnail}
        ,workshop_title = #{workshopTitle}
        ,workshop_contents = #{workshopContents}
        ,category_tag = #{categoryTag}
        ,workshop_like_count = #{workshopLikeCount}
        ,rating = #{rating}
        ,file_path = #{filePath}
        ,created_at = #{createdAt}
        ,updated_at = #{updatedAt}
        ,is_deleted = #{isDeleted}
    </insert>

    <insert id="saveWorkshopMedia">
        INSERT IGNORE INTO community_workshop_media
        set workshop_id = #{workshopId}
        ,workshop_media = #{workshopMedia}
        ,workshop_media_type = #{workshopMediaType}
        ,created_at = #{createdAt}
        ,updated_at = #{updatedAt}
    </insert>

    <insert id="saveWorkshopComment">
        INSERT IGNORE INTO community_workshop_comment
        set user_id = #{userId}
        ,workshop_id = #{workshopId}
        ,workshop_comment_contents = #{workshopCommentContents}
        ,created_at = #{createdAt}
        ,updated_at = #{updatedAt}
        ,is_deleted = #{isDeleted}
    </insert>

    <insert id="saveWorkshopBookmark">
        INSERT IGNORE INTO community_workshop_bookmark
        set workshop_id = #{workshopId}
        ,user_id = #{userId}
        ,created_at = #{createdAt}
    </insert>

    <insert id="saveWorkshopFollow">
        INSERT IGNORE INTO community_workshop_follow
        set workshop_id = #{workshopId}
        ,gm_profile_id = #{gmProfileId}
        ,created_at = #{createdAt}
    </insert>

    <select id="findWorkshopIds">
        SELECT workshop_id
        FROM community_workshop
    </select>
</mapper>