<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.green.pipeline_dummy.application.purchase.purchase.PurchaseMapper">

    <insert id="savePurchase" useGeneratedKeys="true" keyProperty="purchaseId">
        INSERT INTO purchase
        SET gm_profile_id = #{gmProfileId}
            , method_id = #{methodId}
            , currency_code = #{currencyCode}
            , discount_price= #{discountPrice}
            , wallet_used = #{walletUsed}
            , paid_price  = #{paidPrice}
            , purchase_date = #{purchaseDate}
            , pg_tid = #{pgTid}
    </insert>
<!-- 국가에 따른 결제수단 목록   -->
    <select id="findPurchaseMethod">
        SELECT pm.method_id
        FROM payment_method pm
        JOIN payment_country pc
        ON pm.method_id = pc.method_id
        WHERE country_code = #{countryCode};
    </select>



</mapper>